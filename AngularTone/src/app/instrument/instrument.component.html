<div (window:resize)="onResize()">
  <div class="topbar" [ngStyle]="{'padding-top': paddingForTopBar}">

    <div class="my-colors">
      <div class="color-option" [ngStyle]="{'background-color': 'red'}" (click)="changeColor('red', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'orange'}" (click)="changeColor('orange', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'yellow'}" (click)="changeColor('yellow', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'green'}" (click)="changeColor('green', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'blue'}" (click)="changeColor('blue', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'purple'}" (click)="changeColor('purple', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'pink'}" (click)="changeColor('pink', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'black'}" (click)="changeColor('black', $event)"></div>
      <div class="color-option" [ngStyle]="{'background-color': 'white'}" (click)="changeColor('white', $event)"></div>
    </div>

    <div class="my-buttons">
      <button class="playButton" mat-stroked-button color="primary" (click)="playStop()">Play/Stop</button>
      <button class="playButton" mat-stroked-button color="primary" (click)="saveProject();">Save Project</button>
      <button class="playButton" mat-stroked-button color="primary" (click)="Clear();">Clear</button>
    </div>

    <div class="my-sliders">
      <div><label class="pr-2">Volume:</label>
        <mat-slider (input)="changeVolume($event)" step="1" min="-50" max="-10" value="-10"></mat-slider>
      </div>
      <div *ngIf="tempo"><label class="pr-2">Tempo:</label>
        <mat-slider (input)="tempoChange($event)" step="1" min="10" max="300" value="80"></mat-slider> {{tempo}}
      </div>
      <div>
        <mat-form-field>
          <mat-label>Select Effect</mat-label>
          <mat-select (selectionChange)="changeEffect($event)">
            <mat-option value="distortion">Distortion</mat-option>
            <mat-option value="reverb">Reverb</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div *ngIf="dist && showDistortion"><label class="pr-2">Distortion:</label>
        <mat-slider (input)="changeDistortionAmount($event)" step="0.001" min="0" max="1" value="dist.distortion"></mat-slider> {{dist.distortion * 100 | number:'1.0-0'}} %
      </div>
      <div *ngIf="reverb && showReverb"><label class="pr-2">Reverb:</label>
        <mat-slider (input)="changeReverbDecay($event)" step="0.001" min="0.001" max="5" value="reverb.decay"></mat-slider> {{reverb.decay * 20 | number:'1.0-0'}} %
      </div>
    </div>

    <div class="my-dropdowns">
      <mat-form-field class="mb-4">
        <mat-label>Load Saved Project</mat-label>
        <mat-select>
          <mat-option *ngFor="let project of savedProjects" (click)="loadProject(project)">
            {{project.sample}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Load Sample Set</mat-label>
        <mat-select>
          <mat-option *ngFor="let sampleSet of sampleSets" (click)="changeSampleSet(sampleSet)">
            {{sampleSet.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>


  <div class="soundboard-container">
    <div class="play-feature"><div class="play-position" [ngStyle]="{'transform': 'translateX(' + currentTimePosition + 'em) translateY(-3.5px)'}"></div></div>
    <div *ngFor="let track of tracks;" class="pad" (mousedown)="startTracking()" (mouseup)="stopTracking()" (mouseleave)="stopTracking()">
      <div *ngFor="let currentNote of track.note;" class="block-container">
        <div *ngIf="track.part.mute == false" class="single-block" [ngStyle]="{'background-color': currentNote.color, 'opacity': '100%'}" (click)="changeState(currentNote, track)" (mouseover)="getTrackedPosition($event, currentNote, track)">
        </div>
        <div *ngIf="track.part.mute == true" class="single-block" [ngStyle]="{'background-color': currentNote.color, 'opacity': '40%'}" (click)="changeState(currentNote, track)" (mouseover)="getTrackedPosition($event, currentNote, track)">
        </div>
      </div>
      <div *ngIf="tempSoloedTrack != track" class="options" (click)="soloTrack(track)"><img src="../../assets/images/solo-off.png"></div>
      <div *ngIf="tempSoloedTrack == track" class="options" (click)="soloTrack(track)"><img src="../../assets/images/solo-on.png"></div>
      <div *ngIf="track.part.mute == true" class="options" (click)="muteTrack(track)"><img src="../../assets/images/mute.png"></div>
      <div *ngIf="track.part.mute == false" class="options" (click)="muteTrack(track)"><img src="../../assets/images/unmute.png"></div>
      <div class="options" (click)="deleteTrack(track)"><img src="../../assets/images/tiny-trash-can.png"></div>
      <mat-slider class="track-slider options" (input)="changeTrackVolume($event, track)" step="1" min="-50" max="0" value="0"></mat-slider>
    </div>
  </div>

  <div class="blue-button-container">
    <div>
      <button class="blue-button mt-3 btn btn-primary" (click)="showSamples()">Add Sample To Track</button>
    </div>
    
    <div>
      <audio controls></audio>
      <br/>
      <button (click)="record();" class="blue-button btn btn-primary">Record/Stop Record</button>
    </div>
  </div>
</div>

<div id="pop-out-container" [ngStyle]="{'display': popOutDisplay}">
  <div class="close-pop-out" (click)="hideSamples()">
    <div class="x1"></div>
    <div class="x2"></div>
  </div>
  <div class="pop-out">
    <h1 class="p-3">Click a sample to add it to your track</h1>
    <ul class="sample-list">
      <li *ngFor="let sample of samples" class="sample-item" (click)="addTrack(sample)"
        (mouseenter)="playSound(sample)">{{sample.sampleName}}</li>
    </ul>
  </div>
</div>